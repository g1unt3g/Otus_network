## Underlay. eBGP


## Цели:
Настроить BGP в Underlay сети, для IP связанности между всеми устройствами.



## Документация адресного пространства
1. Сеть для loopback интерфейсов 1.1.0.0/23
2. Сеть для линковых интерфейсов 10.0.0.0/24
3. Сеть клиентов 172.16.0.0/24

## Схема:
![img.png](img.png)





### Решение:
1. Удаление следовов конфигурации протоколов IGP для удобства администрирования
2. Включаем feature BGP и создадаём процессы BGP на каждом коммутаторе, spine коммутаторы будут в одной AS,
leaf коммутаторы в разных.
3. На каждом коммутаторе настроим router id равный значению IP лупбек интерфейса
каждого коммутатора.
4. Меняем дефолтные таймеры BGP для ускорения сходимости.
5. Включаем multipath-relax для импорта ECMP маршрутов с неодинаковыми номерами AS в AS-path
6. Создаём AF для IPv4 маршрутов.
7. Добавляем в AF IPv4 анонс адресов лупбек интерфейсов и включаем возможность импорта
равноценных маршрутов в RIB.
8. Добавляем BGP соседей: 1. Для spine коммутаторов настроена подсеть, в которой
коммутаторы будут слушать BGP запросы, а так же роутмап с перечнем AS, с которыми можно
устанавливать соседство. 2. Для leaf коммутаторов указываем в качестве соседей оба спайна



### Проверка:


1. Проверка доступности интерефейсов командой ping.

